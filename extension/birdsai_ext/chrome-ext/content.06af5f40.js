var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,n,o,i){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},d="function"==typeof a[o]&&a[o],l=d.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(e,r){if(!l[e]){if(!t[e]){var n="function"==typeof a[o]&&a[o];if(!r&&n)return n(e,!0);if(d)return d(e,!0);if(c&&"string"==typeof e)return c(e);var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}m.resolve=function(r){var n=t[e][1][r];return null!=n?n:r},m.cache={};var u=l[e]=new s.Module(e);t[e][0].call(u.exports,m,u,u.exports,this)}return l[e].exports;function m(e){var t=m.resolve(e);return!1===t?{}:s(t)}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=t,s.cache=l,s.parent=d,s.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(s,"root",{get:function(){return a[o]}}),a[o]=s;for(var u=0;u<r.length;u++)s(r[u]);if(n){var m=s(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=m:"function"==typeof e&&e.amd?e(function(){return m}):i&&(this[i]=m)}}({"7QoQ9":[function(e,t,r){e("83faf0815a174582").register(JSON.parse('{"5fCQi":"content.06af5f40.js","kQluJ":"logo.5c3a28f0.png"}'))},{"83faf0815a174582":"i6vFE"}],i6vFE:[function(e,t,r){var n={};t.exports.register=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)n[t[r]]=e[t[r]]},t.exports.resolve=function(e){var t=n[e];if(null==t)throw Error("Could not resolve bundle with id "+e);return t}},{}],"4gaGD":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"config",()=>a);var o=e("~assets/logo.png"),i=n.interopDefault(o);console.log("Content script loaded");let a={matches:["http://*/*","https://*/*","https://api.birdsaireporting.com/*"],all_frames:!0},d="https://api.birdsaireporting.com",l=null,c=null,s="";async function u(){try{let e=window.location.hostname,t=e.split("."),r=t.slice(-3).join("."),n=await fetch(`${d}/api/v1/ai-platform/list?domain_name=${r}`),o=await n.json();return o?.data||[]}catch(e){return console.error("API Error:",e),[]}}async function m(e){try{let t=await fetch(`${d}/api/v1/ai-question/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();console.log("Data sent:",r)}catch(e){console.error("API Error:",e)}}async function f(e){let t=function(e){let t={};for(let r in e){let n=e[r];if("string"==typeof n)try{t[r]=JSON.parse(n)}catch{t[r]=n}else t[r]=n}return t}(e.rules),r=t.click||[],n=t.keydown||[];n.forEach(t=>{(function(e,t){let r=document.querySelector(e);if(r)return t(r);let n=new MutationObserver(()=>{let r=document.querySelector(e);r&&(n.disconnect(),t(r))});n.observe(document.body,{childList:!0,subtree:!0})})(t.querySelector,n=>{e.domain_name.includes("chatgpt")?h(n,r):e.domain_name.includes("gemini")?function(e,t){t.forEach(t=>{let r=document.querySelector(t.querySelector);r&&r.addEventListener("click",async()=>{b(e)})})}(n,r):e.domain_name.includes("make")?(r.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e.addEventListener("click",()=>{b(n)},{capture:!0})})}),n.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(n))},{capture:!0})):e.domain_name.includes("lovable")?function(e,t){function r(){let e=document.querySelector(t.querySelector);return e?e.value.trim():""}let n=document.querySelector(t.querySelector);if(!n)return;document.addEventListener("keydown",e=>{let n=e.target;if(n.matches(t.querySelector)&&"Enter"===e.key&&!e.shiftKey){let e=r();e&&b(e)}});let o=new MutationObserver(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.hasAttribute("data-tracking-added")&&(e.setAttribute("data-tracking-added","true"),e.addEventListener("click",async()=>{let e=r();e&&b(e)}))})})});o.observe(document.body,{childList:!0,subtree:!0})}(r,t):e.domain_name.includes("canva")?function(e,t){function r(){let e=document.querySelector(t.querySelector);return e?e.value.trim():""}function n(e){e.dataset.listenerAdded||(e.dataset.listenerAdded="true",e.addEventListener("keydown",e=>{if("Enter"===e.key&&!e.shiftKey){let e=r();b(e)}}))}let o=document.querySelector(t.querySelector);o&&n(o);let i=new MutationObserver(()=>{let o=document.querySelector(t.querySelector);o&&n(o),e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true",e.addEventListener("click",()=>{let e=r();b(e)}))})})});i.observe(document.body,{childList:!0,subtree:!0})}(r,t):e.domain_name.includes("base44")?function(e,t){function r(){let e=document.querySelector(t.querySelector);return e?e.value.trim():""}let n=document.querySelector(t.querySelector);if(!n)return;n.addEventListener("keydown",e=>{if("Enter"===e.key&&!e.shiftKey){let e=r();b(e)}});let o=new MutationObserver(()=>{n&&(function(){let t=new MutationObserver(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true",e.addEventListener("click",()=>{let e=r();b(e)}))})})});t.observe(document.body,{childList:!0,subtree:!0})}(),setTimeout(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true")})})},10))});o.observe(document.body,{childList:!0,subtree:!0})}(r,t):e.domain_name.includes("hubspot")?(r.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e.addEventListener("click",()=>{b(n)})})}),n.addEventListener("keydown",e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let t=n.value.trim();""!==t&&b(t)}})):e.domain_name.includes("app.n8n.cloud")?function(e,t){if(!e||!t){console.log("Textarea or button not found");return}let r="";e.addEventListener("input",()=>{r=e.value}),t.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e.addEventListener("mousedown",()=>{let e=r.trim();b(e)})})}),e.addEventListener("keydown",e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let t=r.trim();t&&b(t)}})}(n,r):e.domain_name.includes("claude")?function(e,t){async function r(){return new Promise(e=>{chrome.storage.local.get(["latestClaudeQuestion"],function(t){console.log(t.latestClaudeQuestion,"-result-"),e(t.latestClaudeQuestion)})})}let n=!1,o=document.querySelector(t.querySelector);if(!o)return;document.addEventListener("keydown",e=>{let o=e.target;o.matches(t.querySelector)&&"Enter"===e.key&&!e.shiftKey&&n&&r().then(e=>{b(e)})});let i=new MutationObserver(()=>{o&&(function(){let e=document.querySelector(t.querySelector);e&&(console.log("Claude editor found."),e.addEventListener("input",()=>{let e=function(){let e=document.querySelector(t.querySelector);return e?e.innerText.trim():""}();console.log(e,"-text"),e&&chrome.storage.local.set({latestClaudeQuestion:e})}))}(),function(){let t=new MutationObserver(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true",e.addEventListener("click",()=>{r().then(e=>{b(e)})}))})})});t.observe(document.body,{childList:!0,subtree:!0})}(),setTimeout(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true",n=!!e)})})},10))});i.observe(document.body,{childList:!0,subtree:!0})}(r,t):e.domain_name.includes("perplexity")?function(e,t){let r=document.querySelector(t.querySelector);if(!r)return;document.addEventListener("keydown",e=>{let r=document.querySelector(t.querySelector);if(r&&r.contains(e.target)&&"Enter"===e.key&&!e.shiftKey){let e=r.innerText.trim();b(e)}},!0);let n=new MutationObserver(()=>{r&&(function(){let r=new MutationObserver(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true",e.addEventListener("click",()=>{let e=function(){let e=document.querySelector(t.querySelector);return e?e.innerText.trim():""}();b(e)}))})})});r.observe(document.body,{childList:!0,subtree:!0})}(),setTimeout(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true")})})},10))});n.observe(document.body,{childList:!0,subtree:!0})}(r,t):e.domain_name.includes("replit")&&function(e,t){let r=document.querySelector(t.querySelector);if(!r)return;document.addEventListener("keydown",e=>{let r=document.querySelector(t.querySelector);if(r&&r.contains(e.target)&&"Enter"===e.key&&!e.shiftKey){let e=r.innerText.trim();b(e)}},!0);let n=new MutationObserver(()=>{r&&(function(){let r=new MutationObserver(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true",e.addEventListener("click",()=>{let e=function(){console.log("Replit editor found.");let e=document.querySelector(t.querySelector);return e?e.innerText.trim():""}();b(e)}))})})});r.observe(document.body,{childList:!0,subtree:!0})}(),setTimeout(()=>{e.forEach(e=>{document.querySelectorAll(e.querySelector).forEach(e=>{e&&!e.dataset.trackingAdded&&(e.dataset.trackingAdded="true")})})},10))});n.observe(document.body,{childList:!0,subtree:!0})}(r,t)})})}async function p(e,t){await m({employee_id:l,ai_platform_id:c,user_session_id:t,ai_question:e,company_id:s})}async function y(e=2e3){let t=Date.now();for(;Date.now()-t<e;){let e=function(e){try{let t=new URL(e);if(t.hostname.includes("chatgpt.com")&&t.pathname.includes("/c/"))return t.pathname.split("/c/")[1];if(t.hostname.includes("gemini.google.com")&&t.pathname.includes("/app/"))return t.pathname.split("/app/")[1];if(t.hostname.includes("canva.com")&&t.pathname.includes("/ai/thread/"))return t.pathname.split("/ai/thread/")[1];if(t.hostname.includes("lovable.dev")&&t.pathname.includes("/projects/"))return t.pathname.split("/projects/")[1];if(t.hostname.includes("app.base44.com")&&t.pathname.includes("/apps/"))return t.pathname.split("/apps/")[1].split("/")[0];if(t.hostname.includes("claude.ai")&&t.pathname.includes("/chat/"))return t.pathname.split("/chat/")[1];return null}catch{return null}}(window.location.href);if(e)return e;await new Promise(e=>setTimeout(e,200))}return null}async function b(e){let t=e.value||e?.innerText?.trim()||e;if(!l||!t)return;let r=await y();r||(r=null),console.log("SID found:",r),await p(t,r)}async function h(e,t){document.body.addEventListener("click",async r=>{t.some(e=>r.target&&r.target.closest(e.querySelector))&&b(e)}),e.addEventListener("keydown",async t=>{"Enter"!==t.key||t.shiftKey||""===e.innerText.trim()||b(e)},!0)}async function g(e){try{let t=await fetch(`${d}/api/v1/company/get/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json(),n=document.querySelector("#ai-department");n.innerHTML="",r?.data?.departments?.length>0?r.data.departments.forEach(e=>{let t=document.createElement("option");t.value=e._id,t.textContent=e.name,n.appendChild(t)}):n.innerHTML='<option value="">No departments available</option>'}catch(e){console.error("Error fetching departments:",e)}}chrome.storage.local.get(["company_id"],async e=>{console.log("\uD83D\uDCE6 Stored company code:",s=e?.company_id||"");let t=await u();t&&t.length>0&&t&&t.forEach(e=>{let t=e?.domain_name;-1!==window.location.hostname.indexOf(t)&&(console.log(`Matched domain: ${t}`),c=e?._id,chrome.storage.local.get(["employee_id"],e=>{(l=e.employee_id||null)||!s||(function(){if(document.getElementById("ai-reporting-extension-popup"))return;let e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=document.createElement("div");t.id="ai-reporting-extension-overlay",Object.assign(t.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:e?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.5)",zIndex:"999998"});let r=document.createElement("div");r.id="ai-reporting-extension-popup",Object.assign(r.style,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"999999",background:e?"#e0e0e0":"#fff",color:"#000",padding:"20px",borderRadius:"8px",width:"400px",fontFamily:"Arial, sans-serif",boxShadow:"0px 4px 20px rgba(0,0,0,0.2)",boxSizing:"border-box"}),r.innerHTML=`
    <div style="text-align: center; margin: 0px auto 10px; height: auto; width: 100px; box-sizing: border-box;">
      <img
        src="${i.default}"
        alt="User Information"
        style="height: 100%; width: 100%; display: block; margin: 0 auto 15px"
      />
    </div>

    <div class="ai-filed">
      <label style="font-weight: bold; box-sizing: border-box">Department</label>
      <select id="ai-department" style="width: 100%; padding: 10px 16px; margin: 6px 0px 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;">
        <option value="">Select Department</option>
      </select>
      <div id="error-department" style="color: red; font-size: 12px; margin-bottom: 10px; box-sizing: border-box;"></div>
    </div>

    <div class="ai-filed">
      <label style="font-weight: bold; box-sizing: border-box">First Name</label>
      <input id="ai-first_name" style="width: 100%; padding: 10px 16px; margin: 6px 0px 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;" />
      <div id="error-first_name" style="color: red; font-size: 12px; margin-bottom: 10px; box-sizing: border-box;"></div>
    </div>

    <div class="ai-filed">
      <label style="font-weight: bold; box-sizing: border-box">Last Name</label>
      <input id="ai-last_name" style="width: 100%; padding: 10px 16px; margin: 6px 0px 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;" />
      <div id="error-last_name" style="color: red; font-size: 12px; margin-bottom: 10px; box-sizing: border-box;"></div>
    </div>

    <div class="ai-filed">
      <label style="font-weight: bold; box-sizing: border-box">Email</label>
      <input id="ai-email" type="email" style="width: 100%; padding: 10px 16px; margin: 6px 0px 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;" />
      <div id="error-email" style="color: red; font-size: 12px; margin-bottom: 16px; box-sizing: border-box;"></div>
    </div>

    <div id="status" style="font-size: 13px; margin-bottom: 10px; text-align: center; box-sizing: border-box;"></div>

    <button id="ai-submitBtn" style="width: 100%; padding: 10px 16px; background: #00978b; color: white; border: none; border-radius: 5px; font-size: 15px; cursor: pointer; box-sizing: border-box;">
      Submit Form
    </button>
  `,document.body.append(t,r),e&&r.querySelectorAll("input, select").forEach(e=>{e.style.backgroundColor="#f5f5f5",e.style.color="#000",e.style.border="1px solid #aaa"});let n={department:document.getElementById("ai-department"),first_name:document.getElementById("ai-first_name"),last_name:document.getElementById("ai-last_name"),email:document.getElementById("ai-email")};Object.keys(n).forEach(e=>{n[e].addEventListener("input",()=>{document.getElementById(`error-${e}`).textContent=""}),n[e].addEventListener("change",()=>{document.getElementById(`error-${e}`).textContent=""})}),r.querySelector("#ai-submitBtn").addEventListener("click",async()=>{let e=!0;document.querySelectorAll("[id^='error-']").forEach(e=>e.textContent="");let o=document.getElementById("status");if(o.style.color="#000",o.textContent="",n.department.value.trim()||(document.getElementById("error-department").textContent="Department is required",e=!1),n.first_name.value.trim()||(document.getElementById("error-first_name").textContent="First Name is required",e=!1),n.last_name.value.trim()||(document.getElementById("error-last_name").textContent="Last Name is required",e=!1),n.email.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email.value.trim())||(document.getElementById("error-email").textContent="Invalid email format",e=!1):(document.getElementById("error-email").textContent="Email is required",e=!1),!e)return;o.style.color="#000",o.textContent="Submitting...";let i=navigator.userAgent,a=i.includes("Firefox")?"Firefox":i.includes("Edg")?"Edge":i.includes("Chrome")?"Chrome":"Unknown";try{let e=await fetch(`${d}/api/v1/company/employee/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:s,firstName:n.first_name.value.trim(),lastName:n.last_name.value.trim(),email:n.email.value.trim(),department_id:n.department.value,chrome_status:"Chrome"===a?1:0,edge_status:"Edge"===a?1:0,mozilla_status:"Firefox"===a?1:0})}),i=await e.json();"success"===i.status?(o.style.color="green",o.textContent="User created successfully!",chrome.storage.local.set({employee_id:i?.data?.employee_id},()=>{r.remove(),t.remove(),location.reload()})):(o.style.color="red",o.textContent=i.msg||"")}catch(e){o.style.color="red",o.textContent="API error.",console.error("Submit error:",e)}})}(),g(s))}),f(e))})}),chrome.storage.local.get("employee_id",e=>{e.employee_id&&console.log("\uD83D\uDC64 Employee ID:",l=e.employee_id)})},{"~assets/logo.png":"jcHdX","@parcel/transformer-js/src/esmodule-helpers.js":"fRZO2"}],jcHdX:[function(e,t,r){t.exports=e("2de9c5a02c14e4bf").getBundleURL("5fCQi")+e("718010e74b0b4ddb").resolve("kQluJ")},{"2de9c5a02c14e4bf":"87g1w","718010e74b0b4ddb":"i6vFE"}],"87g1w":[function(e,t,r){var n={};function o(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r.getBundleURL=function(e){var t=n[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),n[e]=t),t},r.getBaseURL=o,r.getOrigin=function(e){var t=(""+e).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!t)throw Error("Origin not found");return t[0]}},{}],fRZO2:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}]},["7QoQ9","4gaGD"],"4gaGD","parcelRequire466e"),globalThis.define=t;